***pipe to dom***

利用`document.write`可以逐次写入内容的特性，在加上最近支持的`WritableStream`，通过一个临时的iframe做代理，将在iframe中生成的dom节点移交到页面里。[https://streams.spec.whatwg.org/demos/streaming-element.html](https://streams.spec.whatwg.org/demos/streaming-element.html)。

pipe的方法可将大内容分割为chunks，在官方的例子中通过打断点可知到返回的内容被分割成了两份。第一份16384字节。

技巧虽炫酷，但前端接受大文本文件过来的场景，至今没遇到过，

```js
this.writable = new WritableStream({
  async write(chunk) {
    const iframe = await iframeReady; // 两次
    iframe.contentDocument.write(chunk);
  },
  close: end,
  abort: end
});
```